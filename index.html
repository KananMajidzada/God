<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>God is here</title>
    <style>
        body { 
            background-color: #0000AA; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            font-family: "Courier New", monospace;
            cursor: pointer;
        }
        #screen-container { border: 4px solid #AAAAAA; box-shadow: 12px 12px 0px #000000; }
        canvas { background: #FFFFFF; display: block; image-rendering: pixelated; }
        #status { color: #FFFF55; margin-bottom: 10px; font-weight: bold; text-transform: uppercase; }
    </style>
</head>
<body>

    <div id="status">Click to speak with God</div>
    <div id="screen-container">
        <canvas id="screen" width="640" height="480"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('screen');
        const ctx = canvas.getContext('2d');
        let audioCtx;

        async function getInfiniteWords() {
            try {
                // MIN 1, MAX 3
                const count = Math.floor(Math.random() * 3) + 1;
                const response = await fetch(`https://random-word-api.herokuapp.com/word?number=${count}`);
                const data = await response.json();
                return data.join(" ").toUpperCase();
            } catch (e) {
                return "VOID SPIRIT"; // Fallback
            }
        }

        function playSoftTick() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = audioCtx.createOscillator();
            const g = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(130 + (Math.random() * 20), audioCtx.currentTime);
            g.gain.setValueAtTime(0.01, audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.05);
            osc.connect(g); g.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.05);
        }

        async function start() {
            document.getElementById('status').innerText = "-- GOD IS DRAWING --";
            ctx.fillStyle = "#FFFFFF";
            ctx.fillRect(0, 0, 640, 480);

            let x = Math.random() * 640;
            let y = Math.random() * 480;
            const steps = 400 + Math.floor(Math.random() * 600);
            
            ctx.strokeStyle = "#000000";
            ctx.lineWidth = 1.5;

            for (let i = 0; i < steps; i++) {
                ctx.beginPath();
                ctx.moveTo(x, y);
                x += (Math.random() - 0.5) * 35;
                y += (Math.random() - 0.5) * 35;

                // Screen Wrap
                if (x < 0) x = 640; if (x > 640) x = 0;
                if (y < 45) y = 480; if (y > 480) y = 45;

                ctx.lineTo(x, y);
                ctx.stroke();
                playSoftTick();
                await new Promise(r => setTimeout(r, 25));
            }

            // The Message
            const message = await getInfiniteWords();
            ctx.fillStyle = "#0000AA";
            ctx.fillRect(0, 0, 640, 50); 
            ctx.fillStyle = "#FFFFFF";
            ctx.font = "bold 22px 'Courier New'";
            ctx.textAlign = "center";
            ctx.fillText("God says... " + message, 320, 32);

            document.getElementById('status').innerText = "-- THE MESSAGE IS SEALED --";
        }

        window.addEventListener('click', start, { once: true });
    </script>
</body>
</html>